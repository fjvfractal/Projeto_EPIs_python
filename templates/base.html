{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gerenciador de EPI's{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header class="header">
        <h1>Gerenciador de EPI's</h1>
        <nav class="nav">
    <a href="/">ğŸ  InÃ­cio</a>
    <a href="/accounts/login/">âš™ï¸ AdministraÃ§Ã£o</a>
    <a href="/colaboradores/">ğŸ‘¥ Colaboradores</a>
    <a href="/epi/">ğŸ›¡ï¸ EPIs</a>
    <a href="/emprestimos/">ğŸ“œ EmprÃ©stimos</a>

    <!-- Arrumar a pagina de admin para login -->

    <!-- Dropdown para RelatÃ³rios -->
    <div class="dropdown" id="reportsDropdown">
        <button class="dropbtn" aria-haspopup="true" aria-expanded="false">ğŸ“Š RelatÃ³rios â–¾</button>
        <div class="dropdown-content" aria-label="submenu relatÃ³rios">
            <a href="/relatorios/colaborador/">ğŸ‘¤ Por Colaborador</a>
            <a href="/relatorios/epi/">Por Tipo de EPI</a>
            <a href="/relatorios/vencidos/">EPIs Vencidos</a>
        </div>
    </div>
</nav>
    </header>

    <main class="content">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="footer">
        <p>Gerenciador de EPI's</p>
    </footer>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    var dropdown = document.getElementById('reportsDropdown');
    if (!dropdown) return;

    var button = dropdown.querySelector('.dropbtn');

    // Toggle via click (Ãºtil para touch)
    button.addEventListener('click', function(e) {
        e.preventDefault();
        var expanded = dropdown.classList.toggle('open');
        // atualiza aria-expanded para acessibilidade
        button.setAttribute('aria-expanded', expanded ? 'true' : 'false');
    });

    // Fecha dropdown ao clicar fora
    document.addEventListener('click', function(e) {
        if (!dropdown.contains(e.target)) {
            dropdown.classList.remove('open');
            button.setAttribute('aria-expanded', 'false');
        }
    });

    // Fecha com ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            dropdown.classList.remove('open');
            button.setAttribute('aria-expanded', 'false');
            button.blur();
        }
    });
});
</script>
</body>
</html>
